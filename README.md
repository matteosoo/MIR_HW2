# MIR_HW2
# Outline

Task 1: tempo estimation

Task 2: using dynamic programming for beat tracking

Task 3: meter recognition

# Task 1: tempo estimation
## Q1
* èªªæ˜Žï¼š
åœ¨Ballroomé€™å¥—datasetä¸­ï¼Œç”±æ–¼æ•´é«”çš„è³‡æ–™é›†éƒ½åå‘æ–¼ã€Œèˆžæ›²ã€çš„å½¢å¼ï¼Œæ•…å¤§é«”ä¸Šä¾†èªªåœ¨tempoä¸Šçš„é æ¸¬æ˜¯ä¸éŒ¯çš„ã€‚
å°±ç´°é …çœ‹ä¾†ï¼Œå¦‚â€œChaChaChaâ€, â€œTangoâ€éƒ½çœ‹ä¾†æ˜¯è¼ƒä½³çš„çµæžœï¼Œä½†æˆ‘å€‘ä¹Ÿä¸èƒ½å› æ­¤èªªå®ƒå°±æ˜¯æœ€é©åˆè¢«é æ¸¬çš„ç¯€å¥ï¼Œå› ç‚ºä¸åŒåƒæ•¸è¡¨ç¾ä¸‹å°‡å¯èƒ½æœ‰ä¸åŒè¡¨ç¾ï¼Œæˆ‘å€‘åªèƒ½èªªåœ¨é€™æ¨£çš„åƒæ•¸è¨­å®šä¸‹æ˜¯é©åˆé€™æ¨£é¡žåž‹çš„è³‡æ–™é›†ã€‚
å¦å¤–ï¼ŒP scoreä½Žæ–¼ALOTC scoreçš„çµæžœä¹Ÿæ˜¯å¯ä»¥è¢«é æœŸçš„ï¼Œå› ç‚ºALOTCæ˜¯æŽ¡å…©å€‹predictçš„tempoå€¼ä¹‹ä¸€çš„è½åœ¨æŽ¥å—ç¯„åœå…§å³å°çš„æ–¹å¼é‹ç®—ã€‚

* çµæžœï¼š

**P score:**
[0.5081151031247536, 0.5692655367570308, 0.048749463368417935, 0.990990990990991, 0.10769895031859616, 0.7891538637927082, 1.0, 0.0]
**ALOTC score:**
[0.7209302325581395, 0.65, 0.07272727272727272, 0.990990990990991, 0.13846153846153847, 0.8163265306122449, 1.0, 0.0]

```python=
***** Q1 *****
Genre             P-score    	ALOTC score
Samba        	    0.51	    0.72
Jive         	    0.57	    0.65
Waltz        	    0.05	    0.07
ChaChaCha    	    0.99	    0.99
VienneseWaltz	    0.11	    0.14
Rumba        	    0.79	    0.82
Tango        	    1.00	    1.00
Quickstep    	    0.00	    0.00
----------
Overall P-score:	0.50
Overall ALOTC score:	0.55
```
* å‚™è¨»ï¼š
ä¸Šæ¬„[]é™£åˆ—å…§æ•¸å€¼ä¸²ç‚ºç¨‹å¼é‹ç®—çµæžœï¼Œè€Œä¸‹æ–¹æ•´ç†æ–¼ç¨‹å¼ç¢¼æ¬„çš„è³‡è¨Šç‚ºå››æ¨äº”å…¥å–å°æ•¸å¾Œç¬¬2ä½çš„çµæžœã€‚

## Q2
* èªªæ˜Žï¼š
ç”±æ–¼tempoå¾ˆå®¹æ˜“å—åˆ°harmonicçš„å½±éŸ¿ï¼Œæ•…å˜—è©¦äº†ä¸åŒçš„è¨ˆç®—æ–¹å¼é¿å…åè¦‹ï¼Œä¹Ÿå¯ä»¥è—‰æ­¤æ‰¾å‡ºballroomä¸­å„ç¨®æ›²é¢¨(genre)é¡žåž‹çš„datasetæ˜¯å¦å…·ç‰¹å®šçš„ç‰¹å¾µã€‚
å¾žä»¥ä¸‹4.å¤§é»žçš„é‹ç®—çµæžœè§€å¯Ÿï¼Œåœ¨åŽŸå…ˆé‹ç®—ä¸å‡¸é¡¯çš„scoreæœ‰æ©Ÿæœƒåœ¨èª¿æ•´ä¸åŒçš„åƒæ•¸ä¸‹ï¼Œè„«ç©Žè€Œå‡ºã€‚ä¾‹å¦‚Quickstepåœ¨ä¹˜ä»¥å…©å€(*2) tempå¾Œå°±å¾žåŽŸå…ˆ (p score, ALOTC score)ç‚º (0,0)æ‹‰å‡åˆ° (0.92,0.92)çš„è¡¨ç¾ã€‚

* çµæžœ
### 1. [ð‘‡ 1 /2, ð‘‡ 2/2]

**P score:**
[0.030264415418923222, 0.0, 0.13410974723114782, 0.0, 0.0, 0.10880531988076131, 0.0, 0.0]
**ALOTC score:**
[0.03488372093023256, 0.0, 0.15454545454545454, 0.0, 0.0, 0.12244897959183673, 0.0, 0.0]

```python=
***** Q2 *****
Genre             P-score    	ALOTC score
Samba        	    0.03	    0.03
Jive         	    0.00	    0.00
Waltz        	    0.13	    0.15
ChaChaCha    	    0.00	    0.00
VienneseWaltz	    0.00	    0.00
Rumba        	    0.11	    0.12
Tango        	    0.00	    0.00
Quickstep    	    0.00	    0.00
----------
Overall P-score:	0.03
Overall ALOTC score:	0.04
```

### 2. [ð‘‡ 1/3, ð‘‡ 2/3]

**P score:**
[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
**ALOTC score:**
[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]

```python=
***** Q2 *****
Genre             P-score    	ALOTC score
Samba        	    0.00	    0.00
Jive         	    0.00	    0.00
Waltz        	    0.00	    0.00
ChaChaCha    	    0.00	    0.00
VienneseWaltz	    0.00	    0.00
Rumba        	    0.00	    0.00
Tango        	    0.00	    0.00
Quickstep    	    0.00	    0.00
----------
Overall P-score:	0.00
Overall ALOTC score:	0.00
```
### 3. [2ð‘‡ 1 , 2ð‘‡ 2]

**P score:**
[0.0, 0.22178807773151735, 0.0, 0.0, 0.10792610838338562, 0.0, 0.0, 0.9202014846235419]
**ALOTC score:**
[0.0, 0.43333333333333335, 0.0, 0.0, 0.13846153846153847, 0.0, 0.0, 0.926829268292683]


```python=
***** Q2 *****
Genre             P-score    	ALOTC score
Samba        	    0.00	    0.00
Jive         	    0.22	    0.43
Waltz        	    0.00	    0.00
ChaChaCha    	    0.00	    0.00
VienneseWaltz	    0.11	    0.14
Rumba        	    0.00	    0.00
Tango        	    0.00	    0.00
Quickstep    	    0.92	    0.93
----------
Overall P-score:	0.16
Overall ALOTC score:	0.19
```
### 4. [3ð‘‡ 1 , 3ð‘‡ 2]

**P score:**
[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
**ALOTC score:**
[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]


```python=
***** Q2 *****
Genre             P-score    	ALOTC score
Samba        	    0.00	    0.00
Jive         	    0.00	    0.00
Waltz        	    0.00	    0.00
ChaChaCha    	    0.00	    0.00
VienneseWaltz	    0.00	    0.00
Rumba        	    0.00	    0.00
Tango        	    0.00	    0.00
Quickstep    	    0.00	    0.00
----------
Overall P-score:	0.00
Overall ALOTC score:	0.00
```

## Q3
* èªªæ˜Žï¼š
é€™é‚Šä½¿ç”¨MADMOMé€™å€‹libraryä½œtempoé æ¸¬ï¼Œå…¶ä¸­çš„*madmom.features.tempo.TempoEstimationProcessor*å¯ä»¥åˆ©æ–¼æŠ“å‡ºä¸€é€£ä¸²ç”±é«˜è‡³ä½Žå¯èƒ½çš„tempo, å†åŒæ¨£é€éŽåªæŠ“å–å‰å…©åçš„tempoé æ¸¬çµæžœï¼Œä½œå…©ç¨®scoreçš„é‹ç®—ã€‚
è€Œmadmomè—‰ç”±RNNçš„ç¥žç¶“ç¶²è·¯é‹ç®—å¼·åŒ–ï¼Œä½¿å®ƒç›®å‰åœ¨çµæžœä¸Šï¼Œæ¯”èµ·librosaçš„é‹ç®—çµæžœé‚„è¦ä¾†çš„æ›´ä½³ã€‚

* çµæžœï¼š

MADMOM:

**P score:**
[0.5085387287848985, 0.5261774321616962, 0.696423676965648, 0.6466456383185242, 0.6667957158699837, 0.6728964566450605, 0.5575845360942514, 0.5209321297486066]
**ALOTC score:**
[0.9489795918367347, 0.9636363636363636, 1.0, 0.990990990990991, 1.0, 1.0, 0.9651162790697675, 0.7804878048780488]

```python=
***** Q3 *****
Genre             P-score    	ALOTC score
Rumba        	    0.51	    0.95
Waltz        	    0.53	    0.96
VienneseWaltz	    0.70	    1.00
ChaChaCha    	    0.65	    0.99
Jive         	    0.67	    1.00
Tango        	    0.67	    1.00
Samba        	    0.56	    0.97
Quickstep    	    0.52	    0.78
----------
Overall P-score:	0.60
Overall ALOTC score:	0.96
```


# Task 2: using dynamic programming for beat tracking

## Q4
* èªªæ˜Žï¼š
*mireval.beat* åœ¨å”åŠ©F scoreçš„é‹ç®—ä¸Šæœ‰èŽ«å¤§å¹«å¿™ï¼Œä¹Ÿèƒ½æ”¯æŒèˆ‡ground truthè³‡æ–™çš„0.07ç§’ç·©è¡å®¹éŒ¯ï¼ŒçœŸçš„å¿…é ˆå¤§åŠ›æŽ¨å´‡ã€‚

* çµæžœï¼š

Ballroom dataset: 

**F score:**
[0.5446045250558064, 0.6150824788481358, 0.5450631515132844, 0.820329195256893, 0.7115361639888207, 0.7305974462707833, 0.7447967742403079, 0.547331101393421]

```python=
***** Q4 *****
Genre             F-score
Samba        	    0.54
Jive         	    0.62
Waltz        	    0.55
ChaChaCha    	    0.82
VienneseWaltz	    0.71
Rumba        	    0.73
Tango        	    0.74
Quickstep    	    0.55
----------
Overall F-score:	0.66
```
## Q5
* èªªæ˜Žï¼š
Ballroom èˆ‡ä»¥ä¸‹å…©å€‹datasetsç›¸è¼ƒä¾†èªªçµæžœè¼ƒä½³ï¼Œæœ€å¤§åŽŸå› æ‡‰è©²é‚„æ˜¯åœ¨æ–¼å®ƒçš„è³‡æ–™é›†æœ¬èº«æ˜¯ä»¥ã€Œèˆžæ›²ã€ç‚ºä¸»ã€‚
SMC æ‡‰è©²æ˜¯ç›¸è¼ƒé›£çš„è³‡æ–™é›†ï¼Œå› ç‚ºå®ƒç•¶ä¸­çš„éŸ³æ¨‚å¤šåŠæ˜¯å¤å…¸éŸ³æ¨‚ã€æŠ’æƒ…æ­Œ..ç­‰ï¼Œæ—‹å¾‹ç·šæ¢å¤§éŽæ–¼ç¯€å¥æ€§çš„éŸ³æ¨‚ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“è¢«æ—‹å¾‹ç·šæ‹‰è‘—è·‘ã€‚
JCS å…¶å¯¦ä¹Ÿæœ‰ç¯€å¥æ€§å¼·çƒˆçš„æ­Œæ›²ï¼Œä½†ç”±æ–¼èžåˆäº†ä¸€äº›è®Šæ›ç¯€å¥ï¼Œæˆ‘çŒœæ¸¬é€™å¯èƒ½æ˜¯ä½¿ä»–ç›¸è¼ƒBallroomç•¥ç‚ºåä½Žçš„ç†ç”±ã€‚

* çµæžœï¼š

SMC and JCS dataset: 

```python=
***** Q5 *****
Database          F-score
SMC          	    0.36
JCS          	    0.63
```
## Q6
* èªªæ˜Žï¼š
Madmomä½œç‚ºç›®å‰æœ€ä½³çµæžœè¡¨ç¾ä¹‹ä¸€çš„libraryï¼Œç´„èŽ«å¯ç›¸è¼ƒå‰é¢Q4, Q5 æå‡0.15~0.20çš„F scoreè¡¨ç¾ã€‚

* çµæžœï¼š

### 1. Beat tracking
* for the SMC and the JCS dataset
```python=
***** Q6 *****
Database          F-score
SMC          	    0.52
JCS          	    0.82
```
* for the Ballroom dataset

**F score**
[0.8541896120988937, 0.8340432332403245, 0.8163842729678702, 0.8743322780139349, 0.8528222277676363, 0.8270410218567891, 0.866726889695503, 0.6784941085309891]
```python=
***** Q6-Ballroom *****
Genre             F-score
Samba        	    0.85
Jive         	    0.83
Waltz        	    0.82
ChaChaCha    	    0.87
VienneseWaltz	    0.85
Rumba        	    0.83
Tango        	    0.87
Quickstep    	    0.68
----------
Overall F-score:	0.83
```

### 2. Downbeat tracking
* for the Ballroom and the JCS dataset
```python=
***** Q6 *****
Database          F-score
JCS         	    0.72
Ballroom    	    0.74
```

# Task 3: meter recognition
## Q7
### IDEA
é‡å°éŸ³æ¨‚ä¸Šé€™æ¨£[è¤‡ç¯€æ‹ï¼ˆpolymeterï¼‰](https://zh.wikipedia.org/wiki/èŠ‚æ‹#å¤èŠ‚æ‹ï¼ˆæ··åˆèŠ‚æ‹ï¼‰)ï¼Œåˆæˆ–æ˜¯æœƒè¢«ä¿—ç¨±ã€Œè®Šæ…‹æ‹ã€é€™éƒ¨åˆ†ï¼Œè¨­è¨ˆæ¼”ç®—æ³•ä¸Šæœ€é‡è¦æ‡‰è©²åœ¨æ–¼æŽŒæ¡å®ƒçš„å‹•æ…‹è®ŠåŒ–ã€‚

è€Œé¦–å…ˆå‰è™•ç†ä¸Šï¼Œå¯ä»¥åƒè€ƒmirevalå®˜æ–¹libraryä¸­çš„æ–‡ä»¶æœ‰æåˆ°ï¼Œåˆ©ç”¨â€œ*mireval.beat.trimbeats*â€ä½œç‚ºdata preprocessingåŽ»é™¤éŸ³æ¨‚å‰äº”ç§’çš„ç‰‡æ®µä»¥åˆ©æå‡è³‡æ–™çš„æ­£ç¢ºæ€§ã€‚

æ­¤å¤–ï¼Œé©ç•¶çš„åŽ»é™¤é–‹é ­çš„ã€Œå¼±èµ·æ‹ã€ç¯€å¥ï¼Œä»¥åŠæ¶ˆé™¤å°¾å·´ä¸å®Œæ•´çš„å°ç¯€æ‹æ•¸ï¼Œå°‡å¯æœ‰æ•ˆå¾žæ­£ç¢ºä½ç½®ä¸Šé–‹å§‹è¢«åµæ¸¬åˆ°æ­£ç¢ºçµæŸã€‚

å†è€…ï¼Œå¿…é ˆåˆ†æžtempogramä¸­onsetçš„downbeatæ™‚é–“é»žï¼Œä¾‹å¦‚[0, 3, 7 ,10]ä¸¦å‡è¨­æŠ“åˆ°çš„çµå°¾æ™‚é–“é»žç‚º[15]ï¼Œå¦‚æ­¤ä¸€ä¾†æˆ‘å€‘å°‡å¯ä»¥å°‡listä¸­ç›¸é„°ä½ç½®ç›¸æ¸›ï¼Œå¾—åˆ°[3, 4, 3, 5]é€™æ¨£çš„å‹•æ…‹beats_per_barçš„è®ŠåŒ–é—œä¿‚ã€‚

æœ€å¾Œé…åˆmadmomä¸­çš„*madmom.features.DBNDownBeatTrackingProcessor(beatsperbar=beatperbar, fps=100)* é¤µå…¥é æ¸¬ã€‚

---
# Code link ðŸ”—
> Code here: https://github.com/matteosoo/MIR_HW2
